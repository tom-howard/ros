
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Here, you'll learn how ROS Services can be used in combination with the standard publisher/subscriber principles that you already know about, to control a robot more effectively for certain operations.">
      
      
      
        <link rel="canonical" href="https://tom-howard.github.io/ros/com2009/la1/week4/">
      
      
        <link rel="prev" href="../week3/">
      
      
        <link rel="next" href="../week5/">
      
      
      <link rel="icon" href="../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.3">
    
    
      
        <title>Week 4: ROS Services - Robotics in the Diamond: ROS</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.79e020e9.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.a5377069.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config",""),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Robotics in the Diamond: ROS" class="md-header__button md-logo" aria-label="Robotics in the Diamond: ROS" data-md-component="logo">
      
  <img src="../../../assets/tuos.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Robotics in the Diamond: ROS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Week 4: ROS Services
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/tom-howard/ros" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../about/" class="md-tabs__link">
          
  
    
  
  About

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../wsl-ros/" class="md-tabs__link">
          
  
    
  
  WSL-ROS

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
    
  
  COM2009

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../waffles/" class="md-tabs__link">
          
  
    
  
  The Waffles

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../extras/launch-files/" class="md-tabs__link">
          
  
    
  
  ROS Extras

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../others/amr31001/" class="md-tabs__link">
          
  
    
  
  Other Courses

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Robotics in the Diamond: ROS" class="md-nav__button md-logo" aria-label="Robotics in the Diamond: ROS" data-md-component="logo">
      
  <img src="../../../assets/tuos.png" alt="logo">

    </a>
    Robotics in the Diamond: ROS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tom-howard/ros" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    tom-howard/ros
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../about/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    About
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/robots/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Robots
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/acknowledgements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acknowledgements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version History
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../wsl-ros/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    WSL-ROS
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            WSL-ROS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wsl-ros/first-run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Launching for the First Time
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wsl-ros/configure-vscode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring Visual Studio Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wsl-ros/linux-term/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A Quick Introduction to the Linux Terminal
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wsl-ros/wsl-ros-return/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Re-Launching WSL-ROS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wsl-ros/backup-restore/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backing-Up (and Restoring) your Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wsl-ros/rdp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote Access
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wsl-ros/wt-settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows Terminal Settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wsl-ros/vscode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Launching VS Code (in WSL-ROS)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../wsl-ros/installing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing ROS on Your Own PC
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    COM2009
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            COM2009
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Lab Assignment #1
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Lab Assignment #1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../week1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Week 1: ROS & Linux Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../week2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Week 2: Odometry & Basic Navigation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../week3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Week 3: Advanced Navigation & SLAM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Week 4: ROS Services
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Week 4: ROS Services
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    Aims
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    Intended Learning Outcomes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    Quick Links
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    Additional Resources
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-introduction-to-services" class="md-nav__link">
    An Introduction to Services
  </a>
  
    <nav class="md-nav" aria-label="An Introduction to Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
     Exercise 1: Creating a Service Server in Python and calling it from the command-line
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rossrv" class="md-nav__link">
    Using rossrv
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-format-of-a-service-message" class="md-nav__link">
    The Format of a Service Message
  </a>
  
    <nav class="md-nav" aria-label="The Format of a Service Message">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
     Exercise 2: Creating a Python Service Client Node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
     Exercise 3: Making and calling your own Service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-recap-on-everything-youve-learnt-so-far" class="md-nav__link">
    A recap on everything you've learnt so far...
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sim-env-mods" class="md-nav__link">
    Manipulating the Environment in Gazebo
  </a>
  
    <nav class="md-nav" aria-label="Manipulating the Environment in Gazebo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
     Exercise 4: Approaching an object using a Service and closed-loop control
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    Wrapping Up
  </a>
  
    <nav class="md-nav" aria-label="Wrapping Up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    Saving your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../week5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Week 5: ROS Actions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../week6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Week 6: Cameras, Machine Vision & OpenCV
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../la2/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Lab Assignment #2
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Lab Assignment #2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../la2/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../la2/getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started (Week 7 Tasks)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../la2/task1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 1: Creating a Deployable ROS Package
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../la2/task2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 2: Obstacle Avoidance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../la2/task3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 3: Maze Navigation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../la2/task4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 4: Detection, Search & Beaconing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../la2/task5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task 5: Real-World Exploration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../la2/extras/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Additional Resources
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3_9" id="__nav_3_3_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3_9">
            <span class="md-nav__icon md-icon"></span>
            Additional Resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../la2/extras/laptops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with your ROS Packages on the laptops (with GitHub and SSH)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../la2/extras/submission/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exporting your ROS package for submission
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../waffles/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    The Waffles
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            The Waffles
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/launching-ros/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Launching ROS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/exercises/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Initial Exercises
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/fact-finding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fact-Finding Missions!
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/shutdown/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Safe Shutdown
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../waffles/tips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips & Tricks
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    ROS Extras
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            ROS Extras
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../extras/launch-files/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Launch Files
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Launch Files
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/launch-files/launching-launch-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Launching Other Launch Files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/launch-files/roslaunch-clas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROSlaunch Command-line Arguments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/launch-files/python-clis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building Command-line Interfaces (CLIs) for Python Nodes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/launch-files/cla-to-node/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Passing Command-line Arguments to Python Nodes via ROSlaunch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/launch-files/roslaunch-api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using the ROSlaunch Python API
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/ros-msgs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating Your Own Custom ROS Messages
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/tom-howard/COM2009" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Course Repo (GitHub)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Other Courses
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Other Courses
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../others/amr31001/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    AMR31001
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            AMR31001
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/amr31001/lab1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab 1: Mobile Robotics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/amr31001/lab2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab 2: Feedback Control
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="https://lincaolab.github.io/acs6121/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ACS6121
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aims" class="md-nav__link">
    Aims
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#intended-learning-outcomes" class="md-nav__link">
    Intended Learning Outcomes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quick-links" class="md-nav__link">
    Quick Links
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    Additional Resources
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#an-introduction-to-services" class="md-nav__link">
    An Introduction to Services
  </a>
  
    <nav class="md-nav" aria-label="An Introduction to Services">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex1" class="md-nav__link">
     Exercise 1: Creating a Service Server in Python and calling it from the command-line
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rossrv" class="md-nav__link">
    Using rossrv
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-format-of-a-service-message" class="md-nav__link">
    The Format of a Service Message
  </a>
  
    <nav class="md-nav" aria-label="The Format of a Service Message">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex2" class="md-nav__link">
     Exercise 2: Creating a Python Service Client Node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ex3" class="md-nav__link">
     Exercise 3: Making and calling your own Service
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-recap-on-everything-youve-learnt-so-far" class="md-nav__link">
    A recap on everything you've learnt so far...
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sim-env-mods" class="md-nav__link">
    Manipulating the Environment in Gazebo
  </a>
  
    <nav class="md-nav" aria-label="Manipulating the Environment in Gazebo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ex4" class="md-nav__link">
     Exercise 4: Approaching an object using a Service and closed-loop control
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-up" class="md-nav__link">
    Wrapping Up
  </a>
  
    <nav class="md-nav" aria-label="Wrapping Up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backup" class="md-nav__link">
    Saving your work
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/tom-howard/ros/edit/main/docs/com2009/la1/week4.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/tom-howard/ros/raw/main/docs/com2009/la1/week4.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


  <h1>Week 4: ROS Services</h1>

<div class="admonition info">
<p class="admonition-title">Info</p>
<p>You should be able to complete <strong>most</strong> of the exercises on this page within a two-hour lab session, but you might need to spend a bit more time on the final exercise.</p>
</div>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<h3 id="aims">Aims<a class="headerlink" href="#aims" title="Permanent link">&para;</a></h3>
<p>In this session you will learn about another communication method that can be used to transmit data/information and invoke actions across a ROS Network: ROS <em>Services</em>. You will learn how ROS Services can be used in combination with the standard publisher/subscriber principles that you already know about to control a robot more effectively for certain operations.</p>
<h3 id="intended-learning-outcomes">Intended Learning Outcomes<a class="headerlink" href="#intended-learning-outcomes" title="Permanent link">&para;</a></h3>
<p>By the end of this session you will be able to:</p>
<ol>
<li>Recognise how ROS Services differ from the standard topic-based publisher-subscriber approach, and identify appropriate use-cases for this type of messaging system.</li>
<li>Implement Python node pairs to observe services in action, and understand how they work.</li>
<li>Invoke different services using a range of service message types.</li>
<li>Develop Python Service nodes of your own to perform specific robotic tasks.</li>
<li>Harness Services, in combination with LiDAR data, to implement a basic obstacle avoidance behaviour.</li>
<li>Demonstrate your understanding of ROS so far by developing a Python node which incorporates elements from this and previous parts of this course.</li>
</ol>
<h3 id="quick-links">Quick Links<a class="headerlink" href="#quick-links" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="#ex1">Exercise 1: Creating a Service <em>Server</em> in Python and calling it from the command-line</a></li>
<li><a href="#ex2">Exercise 2: Creating a Python Service <em>Client</em> Node</a></li>
<li><a href="#ex3">Exercise 3: Making and calling your own Service</a></li>
<li><a href="#ex4">Exercise 4: Approaching an object using a Service and closed-loop control</a></li>
</ul>
<h3 id="additional-resources">Additional Resources<a class="headerlink" href="#additional-resources" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="move_server">The Service Server Code (for Exercise 1)</a></li>
<li><a href="move_client">The Service Client Code (for Exercise 2)</a></li>
<li><a href="scan_callback">Creating a <code>/scan</code> Callback Function</a></li>
</ul>
<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p><strong>Step 1: Launch WSL-ROS</strong><br />
Launch your WSL-ROS environment by running the WSL-ROS shortcut in the Windows Start Menu (if you haven't already done so). Once installed, the <em>Windows Terminal</em> app should launch with an <em>Ubuntu terminal instance</em> ready to go (<strong>TERMINAL 1</strong>).</p>
<p><strong>Step 2: Restore your work</strong><br />
When prompted (in <strong>TERMINAL 1</strong>), enter <code>Y</code> to restore your work from last time<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>.</p>
<p><strong>Step 3: Launch VS Code</strong><br />
Follow <a href="../../../wsl-ros/vscode">these steps</a> to launch VS Code correctly within the WSL-ROS environment.</p>
<p><strong>Step 4: Launch the Robot Simulation</strong><br />
From <strong>TERMINAL 1</strong>, launch the TurtleBot3 Waffle <em>"Empty World"</em> simulation:</p>
<hr />
<p><strong>TERMINAL 1:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>roslaunch<span class="w"> </span>turtlebot3_gazebo<span class="w"> </span>turtlebot3_empty_world.launch
</code></pre></div>
...and then wait for the Gazebo window to open:</p>
<figure>
<p><img alt="" src="../../../images/gazebo/tb3_empty_world.png" width="800px" /></p>
</figure>
<details class="tip">
<summary>Remember</summary>
<p>You can also use the <code>tb3_empty_world</code> command-line alias to launch the simulation, rather than using that long <code>roslaunch</code> command!</p>
</details>
<h2 id="an-introduction-to-services">An Introduction to Services<a class="headerlink" href="#an-introduction-to-services" title="Permanent link">&para;</a></h2>
<p>So far, we've learnt about ROS <em>topics</em> and <em>messages</em>, and how individual nodes can access data on a robot by simply <em>subscribing</em> to topics that are being published by any other node on the system.  In addition to this, we also learnt how any node can <em>publish</em> messages to any topic: this essentially broadcasts the data contained in the message across the ROS Network, making it available to any other node on the network that may wish to access it.</p>
<p>Another way to pass data between ROS Nodes is by using <em>Services</em>.  These are different to messages in that <em>"Service calls"</em> (that is, the process of requesting a service) occur <em>only</em> between one node and another:</p>
<ol>
<li>One node (a Service <em>Client</em>) sends a <strong>Request</strong> to another node.</li>
<li>Another node (a Service <em>Server</em>) processes that request, performs an action and then sends back a <strong>Response</strong>.</li>
</ol>
<figure>
<p><img alt="The difference between topic-based messaging and the ROS Service protocol" src="topic_vs_service.png" /></p>
</figure>
<p>Services are <em>Synchronous</em> (or <em>sequential</em>): When a ROS node sends a request to a service (as a Service <em>Client</em>) it can't do anything else until the service has been completed and the Service <em>Server</em> has sent a response back. This can be useful for a variety of reasons:</p>
<ul>
<li>
<p><strong>Discrete, short-duration actions:</strong></p>
<ul>
<li>A robot might need to do something before it can move on to something else, i.e.: it needs to see something before it can move towards it.</li>
<li>High definition cameras generate large amounts of data and consume battery power, so you may wish to turn a camera on for a specific amount of time (e.g. until an image has been captured) and then turn it off again.</li>
</ul>
</li>
<li>
<p><strong>Computations</strong>: Remember that ROS is <em>network-based</em> so you might want to offload some computations to a remote computer or a different device on a robot, e.g.:</p>
<ul>
<li>A client might send some data and then wait for another process (the server) to process it and send back the result.</li>
</ul>
</li>
</ul>
<p>It's also worth noting that any number of ROS Client nodes can call a service, but you can only have a <em>single</em> Server providing that particular service at any one time.</p>
<figure>
<p><img alt="" src="service_clients.png" /></p>
</figure>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Can you think of any other scenarios where this type of communication protocol might be useful?</p>
</div>
<p>You'll explore how all this works in the next two exercises, where you will create service <em>Server</em> and <em>Client</em> nodes in Python, launch them from the command-line and observe the outcomes.</p>
<h4 id="ex1"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44-.02.49-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3v-3.75Z"/></svg></span> Exercise 1: Creating a Service <em>Server</em> in Python and calling it from the command-line<a class="headerlink" href="#ex1" title="Permanent link">&para;</a></h4>
<p>To start with, let's set up a service and learn how to make a call to it from the command-line to give you an idea of how this all works and why it might be useful.</p>
<ol>
<li>
<p>First open up a new terminal instance (<strong>TERMINAL 2</strong>) and create a package called <code>week4_services</code> using the <code>catkin_create_pkg</code> tool as you have done in previous weeks:</p>
<ol>
<li>
<p>Navigate to the <code>catkin_ws/src</code> directory:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nb">cd</span><span class="w"> </span>~/catkin_ws/src
</code></pre></div></p>
<hr />
</li>
<li>
<p>Create the <code>week4_services</code> package and define <code>rospy</code>, <code>geometry_msgs</code> and <code>tuos_ros_msgs</code> as dependencies:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>catkin_create_pkg<span class="w"> </span>week4_services<span class="w"> </span>rospy<span class="w"> </span>geometry_msgs<span class="w"> </span>tuos_ros_msgs
</code></pre></div></p>
<hr />
</li>
<li>
<p>Run <code>catkin build</code> on the package:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>catkin<span class="w"> </span>build<span class="w"> </span>week4_services
</code></pre></div></p>
<hr />
</li>
<li>
<p>And then re-source your environment:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">source</span><span class="w"> </span>~/.bashrc
</code></pre></div></p>
<details class="tip">
<summary>Tip</summary>
<p>We're having to do this <code>source ~/.bashrc</code> thing a lot aren't we?! We've created a handy alias for it... use <code>src</code> instead!</p>
</details>
<hr />
</li>
</ol>
</li>
<li>
<p>Then, navigate to your package <code>src</code> folder that should have been created by <code>catkin_create_pkg</code>:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>roscd<span class="w"> </span>week4_services/src
</code></pre></div></p>
<hr />
</li>
<li>
<p>Create a file called <code>move_server.py</code> (using <code>touch</code>) and set this to be executable (using <code>chmod</code>).        </p>
</li>
<li>
<p>Then, open the file in VS Code, copy and paste <a href="move_server">this code</a> and then save it. <a name="ex1_ret"></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It's really important that you understand how the code above works, so that you know how to build your own service <em>Servers</em> in Python. Make sure you read the code annotations thoroughly.</p>
</div>
</li>
<li>
<p>Return to the terminal window and launch the node using <code>rosrun</code>:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>rosrun<span class="w"> </span>week4_services<span class="w"> </span>move_server.py
</code></pre></div></p>
<p>You should see the message:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>[INFO] [#####]: the &#39;move_service&#39; Server is ready to be called...
</code></pre></div>
<hr />
</li>
<li>
<p>Then open up a new terminal window (<strong>TERMINAL 3</strong>)</p>
</li>
<li>
<p>We can use the <code>rosservice</code> command to view all the services that are <em>currently active</em> on our system:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>rosservice<span class="w"> </span>list
</code></pre></div></p>
<p>You should see the <code>/move_service</code> service that we defined in the Python code:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">service_name</span> <span class="o">=</span> <span class="s2">&quot;move_service&quot;</span>
</code></pre></div>
<hr />
</li>
<li>
<p>We can find out more about this using the <code>rosservice info</code> command:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>rosservice<span class="w"> </span>info<span class="w"> </span>/move_service
</code></pre></div></p>
<p>Which should provide the following output:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>Node: /move_service_server
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>URI: #####
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>Type: tuos_ros_msgs/SetBool
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>Args: request_signal
</code></pre></div>
<hr />
<p>You may notice that the node <em>name</em> is <code>/move_service_server</code>, as set in our Python code when we initialised the node:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">service_name</span><span class="si">}</span><span class="s2">_server&quot;</span><span class="p">)</span>
</code></pre></div>
<p><strong>Type</strong> tells us the <em>type of message</em> this service uses, and we'll look at this in more detail later.<br />
<strong>Args</strong> tells us what <em>input arguments</em> we need to supply to the service in order to make a valid <em>service call</em> (or <strong>Request</strong>).<a name="cl_call"></a></p>
</li>
<li>
<p>We can now call this service from the command-line using the <code>rosservice</code> command again.  The autocomplete functionality in the terminal can help us format this message correctly.  Type the following text followed by a space and two tabs as illustrated:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>rosservice<span class="w"> </span>call<span class="w"> </span>/move_service<span class="o">[</span>SPACE<span class="o">][</span>TAB<span class="o">]</span>
</code></pre></div></p>
<p>which should autocomplete the rest of the command for us:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>rosservice<span class="w"> </span>call<span class="w"> </span>/move_service<span class="w"> </span><span class="s2">&quot;request_signal: false&quot;</span>
</code></pre></div>
<hr />
</li>
<li>
<p>Press <code>[ENTER]</code> to issue this command and make a call to the service.  You should see the following response:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>response_signal: False
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>response_message: &quot;Nothing happened, set request_signal to &#39;true&#39; next time.&quot;
</code></pre></div>
</li>
<li>
<p>Arrange your windows so that you can see both the Gazebo simulation with your robot in, and the terminal that you just issued the <code>rosservice call</code> command (<strong>TERMINAL 3</strong>).</p>
</li>
<li>
<p>In <strong>TERMINAL 3</strong> enter the <code>rosservice call</code> command again, but this time setting the input argument to <code>true</code>.  Observe the response to the simulated robot in Gazebo.  Switch back to <strong>TERMINAL 2</strong> and observe the terminal output here too.</p>
</li>
</ol>
<p><strong>Summary:</strong></p>
<p>You have just created a node in Python to launch a service. This node acted as a <em>Server</em>: sitting idle and waiting, indefinitely, for its service to be called. We then issued the call to the service via the command-line, which then prompted our Service Server to carry out the tasks that we had defined within the Python code, namely:</p>
<ol>
<li>Start a timer.</li>
<li>Issue a velocity command to the robot to make it move forwards.</li>
<li>Wait for 5 seconds.</li>
<li>Issue a velocity command to make the robot stop.</li>
<li>Prepare a Service <strong>Response</strong> and issue this to the terminal in which we called the service (<strong>TERMINAL 3</strong>).</li>
</ol>
<h3 id="rossrv">Using <code>rossrv</code><a class="headerlink" href="#rossrv" title="Permanent link">&para;</a></h3>
<p>In the previous exercise we used <code>rosservice list</code> to identify all the services that were <em>currently active</em> on the ROS system.  We then used <code>rosservice info</code> to find out a bit more about the service that we had launched with our Python node (which we called <code>/move_service</code>).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>rosservice info /move_service:
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>Node: /move_service_server
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>URI: #####
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>Type: tuos_ros_msgs/SetBool
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>Args: request_signal
</code></pre></div>
<p><strong>Type</strong> tells us the <em>type of message</em> this service uses. Just like a topic message there are two parts to this definition:</p>
<div class="highlight"><pre><span></span><code>tuos_ros_msgs/SetBool
</code></pre></div>
<ol>
<li>The service message is part of a package called <code>tuos_ros_msgs</code></li>
<li>The message itself is called <code>SetBool</code></li>
</ol>
<p>We can find out more about this using the <code>rossrv</code> command, which has the same usage as the <code>rosmsg</code> command that you have already used previously (for interrogating <em>topic messages</em>). <code>rossrv</code> gives us information about all the service messages that are <em>installed on our system</em> and that are available for us to use in any ROS applications that we create:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>rossrv<span class="w"> </span>info<span class="w"> </span>tuos_ros_msgs/SetBool
</code></pre></div>
... which gives: </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>bool request_signal
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>---
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>bool response_signal
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>string response_message
</code></pre></div>
<hr />
<h3 id="the-format-of-a-service-message">The Format of a Service Message<a class="headerlink" href="#the-format-of-a-service-message" title="Permanent link">&para;</a></h3>
<p>As you can see from above, service messages have two parts to them, separated by three hyphens (<code>---</code>). Above the separator is the Service <strong>Request</strong>, and below it is the Service <strong>Response</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>bool request_signal     &lt;-- Request
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>---
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>bool response_signal    &lt;-- Response (Parameter 1/2)
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>string response_message &lt;-- Response (Parameter 2/2)
</code></pre></div>
<p>In order to <em>Call</em> a service, we need to provide data to it in the format specified in the <strong>Request</strong> section of the message. A service <em>Server</em> (like the <a href="move_server#code">Python node we created above</a>) will then send data back to the caller in the format specified in the <strong>Response</strong> section of the message.</p>
<p>The <code>tuos_ros_msgs/SetBool</code> service message that we're working with here has a <strong>one</strong> request parameter:</p>
<ol>
<li>A <em>boolean</em> input called <code>request_signal</code><br />
    ...which is the only thing we need to send to the Service Server in order to call the service.</li>
</ol>
<p>There are then <strong>two</strong> response parameters:</p>
<ol>
<li>A <em>boolean</em> flag called <code>response_signal</code></li>
<li>A text <em>string</em> called <code>response_message</code><br />
    ...both of these will be returned to the client, by the server, once the Service has completed.</li>
</ol>
<h4 id="ex2"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44-.02.49-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3v-3.75Z"/></svg></span> Exercise 2: Creating a Python Service <em>Client</em> Node<a class="headerlink" href="#ex2" title="Permanent link">&para;</a></h4>
<p>As well as calling a service from the command-line we can also build Python nodes to do the same thing (i.e. we can build Python Service <em>Client</em> Nodes). In this exercise you will learn how this is done.</p>
<ol>
<li>
<p><strong>TERMINAL 3</strong> should be idle, so from here navigate to the <code>src</code> folder within the <code>week4_services</code> package that we created earlier:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>roscd<span class="w"> </span>week4_services/src
</code></pre></div></p>
<hr />
</li>
<li>
<p>Create a new file called <code>move_client.py</code> and make sure that this is executable.</p>
</li>
<li>
<p>Launch the file in VS Code, copy and paste <a href="move_client">this code</a> and then save the file. <a name="ex2_ret"></a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once again, be sure to read the code annotations, and make sure that you understand how this Python Service Client Node works too!</p>
</div>
</li>
<li>
<p>Return to <strong>TERMINAL 3</strong> and launch the node using <code>rosrun</code>:</p>
<hr />
<p><strong>TERMINAL 3:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>rosrun<span class="w"> </span>week4_services<span class="w"> </span>move_client.py
</code></pre></div></p>
<hr />
<p>The response should be exactly the same as observed in Exercise 1.</p>
</li>
</ol>
<h4 id="ex3"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44-.02.49-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3v-3.75Z"/></svg></span> Exercise 3: Making and calling your own Service<a class="headerlink" href="#ex3" title="Permanent link">&para;</a></h4>
<p>In this exercise you will create your own service Server to make the Waffle perform a specific movement for a given amount of time and then stop.</p>
<p>A service message called <code>tuos_ros_msgs/TimedMovement</code> has already been set up to help you do this. Interrogate this using the <code>rossrv</code> command (as described <a href="#rossrv">above</a>) to work out how to use this message in your Python Server node.</p>
<p>The service should respond to four different movement commands to invoke four different actions:</p>
<ol>
<li><code>"fwd"</code>: Move forwards.</li>
<li><code>"back"</code>: Move backwards.</li>
<li><code>"left"</code>: Turn left.</li>
<li><code>"right"</code>: Turn right.</li>
</ol>
<p>The Server should make the robot perform the desired action for a duration that is also specified within the service message (in seconds).</p>
<p><strong>Procedure:</strong></p>
<ol>
<li>Close down the Service Server that is currently running in <strong>TERMINAL 2</strong>.</li>
<li>
<p>Create a new node in your <code>week4_services</code> package:</p>
<ol>
<li>
<p>Navigate to the <code>week4_services/src</code> folder using <code>roscd</code>:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>roscd<span class="w"> </span>week4_services/src
</code></pre></div></p>
<hr />
</li>
<li>
<p>You can use the <code>move_server.py</code> node that you created earlier as a starting point if you want to. Copy the file and rename it <code>timed_move_server.py</code> using the <code>cp</code> command:</p>
<hr />
<p><strong>TERMINAL 2:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>cp<span class="w"> </span>move_server.py<span class="w"> </span>timed_move_server.py
</code></pre></div></p>
<hr />
</li>
</ol>
</li>
<li>
<p>Open the new <code>timed_move_server.py</code> file in VS Code and modify it as follows:</p>
<ol>
<li>Change the imports to utilise the correct service message type (<code>tuos_ros_msgs/TimedMovement</code>).</li>
<li>Modify the <code>rospy.Service</code> call to use the <code>TimedMovement</code> service message type.</li>
<li>
<p>Develop the <code>callback_function()</code> to:</p>
<ol>
<li>
<p>Process the <strong>two</strong> parameters that will be provided to the server via the <code>service_request</code> input argument.  </p>
<div class="admonition tip">
<p class="admonition-title">Remember</p>
<p>You can use <code>rossrv info ...</code> to find out what these two parameters are called, and their data types.</p>
</div>
</li>
<li>
<p>Make the robot perform the correct action.</p>
</li>
<li>Return a correctly formatted service response message to the service caller.</li>
<li>Launch your server node using <code>rosrun</code> from <strong>TERMINAL 2</strong> and <em>call</em> the service from the command-line using the <code>rosservice call</code> command in <strong>TERMINAL 3</strong>, <a href="#cl_call">as you did earlier</a>.</li>
</ol>
</li>
</ol>
</li>
</ol>
<h2 id="a-recap-on-everything-youve-learnt-so-far">A recap on everything you've learnt so far...<a class="headerlink" href="#a-recap-on-everything-youve-learnt-so-far" title="Permanent link">&para;</a></h2>
<p>You should now hopefully understand how to use the ROS Service architecture and understand why, and in what context, it might be useful to use this type of communication method in a robot application.</p>
<div class="admonition tip">
<p class="admonition-title">Remember</p>
<p>Services are <strong>synchronous</strong> and are useful for one-off, quick actions; or for offloading jobs or computations that might need to be done before something else can happen.  (Think of it as a transaction that you might make in a shop: You hand over some money, and in return you get a chocolate bar, for example!)</p>
</div>
<p>Over the last four sessions we've learnt how to use a range of key ROS tools, and hopefully you're starting to understand how ROS works and how you might approach a robot programming task using this framework. In the final exercise of this session you'll consolidate some of the things that you've done so far:</p>
<ul>
<li>How to publish and subscribe to topics.</li>
<li>How to make a robot move.</li>
<li>How to interpret Laser Displacement Data from the LiDAR sensor.</li>
<li>How to invoke an action using a ROS Service.</li>
<li>How to develop ROS Nodes in Python, and how to use the Python Class Structure.</li>
</ul>
<h2 id="sim-env-mods">Manipulating the Environment in Gazebo<a class="headerlink" href="#sim-env-mods" title="Permanent link">&para;</a></h2>
<p>In order to carry out the last exercise you'll also need to be able to manipulate the robot's simulated environment using some basic tools in Gazebo. First, make sure that there are no active processes running in <strong>TERMINALS 2</strong> or <strong>3</strong>, but leave the Gazebo simulation in <strong>TERMINAL 1</strong> running.</p>
<p>In the Gazebo simulation window, use the "Box" tool in the top toolbar to place a box in front of the robot:</p>
<figure>
<p><img alt="" src="../../../images/gazebo/box.png" width="700px" /></p>
</figure>
<p>Use the "Scale Mode" button to resize the box and use the "Translation Mode" button to reposition it.</p>
<figure>
<p><img alt="" src="../../../images/gazebo/toolbar_buttons.png" /></p>
</figure>
<p>Once you are happy with this, right-click on the object and select "Delete" to remove it from the world. </p>
<figure>
<p><img alt="" src="../../../images/gazebo/delete.png" /></p>
</figure>
<h4 id="ex4"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c-.34.34-.67.67-.68 1-.03.32.31.65.63.96.48.5.95.95.93 1.44-.02.49-.53 1-1.04 1.5l-4.13 4.14L15 14.66l4.25-4.24-.96-.96-1.42 1.41-3.75-3.75 3.84-3.83c.39-.39 1.04-.39 1.41 0l2.34 2.34c.39.37.39 1.02 0 1.41M3 17.25l9.56-9.57 3.75 3.75L6.75 21H3v-3.75Z"/></svg></span> Exercise 4: Approaching an object using a Service and closed-loop control<a class="headerlink" href="#ex4" title="Permanent link">&para;</a></h4>
<p>For this exercise you need to build another Python <em>Server</em> node which must perform the following tasks:</p>
<ol>
<li>Make the robot move forwards, towards an object placed in front of it. As you know, you'll do this by publishing velocity commands to the <code>/cmd_vel</code> topic.</li>
<li>The server node must then <em>stop</em> the robot before it hits the obstacle that you have placed in front of it by subscribing to the <code>/scan</code> topic and monitoring distance information from the LiDAR sensor telling us how far away the object is. </li>
<li>The server must do this by considering <em>two inputs</em> received from a <em>Service Request</em>:<ol>
<li>The speed (in m/s) at which to approach the object.</li>
<li>The distance (in meters) at which the robot must stop in front of it.</li>
</ol>
</li>
<li>A service message called <code>tuos_ros_msgs/Approach</code> is available for you to use for this exercise. Use this to build your service server. Remember, you can find out more about this message using <code>rossrv info</code>.</li>
<li>
<p>We haven't really done much work with the LiDAR data published to the <code>/scan</code> topic yet, so you might want to consider <a href="scan_callback">this suggested approach</a> for building a <code>/scan</code> callback function. <a name="ex4_ret"></a></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You should use a class structure in your Python code here. Start off with the <a href="../week1/subscriber">subscriber node from Week 1</a> and add code to this to build the functionality required for this exercise.</p>
</div>
</li>
</ol>
<h2 id="wrapping-up">Wrapping Up<a class="headerlink" href="#wrapping-up" title="Permanent link">&para;</a></h2>
<p>In this session you have learnt about ROS Services and why they might be useful for a Robot:</p>
<ul>
<li>Services differ from standard topic-based communication methods in ROS in that they are a direct form of communication between one node and another.  </li>
<li>The communication between the two nodes is sequential or <em>synchronous</em>: once a service <em>Caller</em> has <em>called</em> a service, it cannot continue until it has received a <em>response</em>.</li>
<li>This is useful for controlling <em>quick</em>, <em>short-duration</em> tasks or for <em>offloading computations</em> (which could perhaps also be considered <em>decision making</em>).</li>
</ul>
<p>Having completed this week's exercises, you should now be able to:</p>
<ul>
<li>Create and execute Python Service <em>Servers</em>.</li>
<li>Create and execute Python Service <em>Callers</em>, as well as call services from the command-line.</li>
<li>Implement these principles with a range of different service message types to perform a number of different robot tasks.</li>
<li>Use LiDAR data effectively for basic closed-loop robot control.</li>
<li>Develop Python nodes which <em>also</em> incorporate principles from the previous three weeks of this course:<ul>
<li>Publishing and subscribing to topics.</li>
<li>Controlling the velocity and position of a robot.</li>
<li>Using the Python Class architecture.</li>
<li>Harnessing ROS and Linux command-line tools.</li>
</ul>
</li>
</ul>
<h3 id="backup">Saving your work<a class="headerlink" href="#backup" title="Permanent link">&para;</a></h3>
<p>Remember, the work you have done in the WSL-ROS environment during this session <strong>will not be preserved</strong> for future sessions or across different University machines automatically! To save the work you have done here today you should now run the following script in any idle WSL-ROS Terminal Instance:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>wsl_ros<span class="w"> </span>backup
</code></pre></div>
<p>This will export your home directory to your University U: Drive, allowing you to restore it at the start of the next session.</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>Remember: you can also use the <code>wsl_ros restore</code> command at any time.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2023-03-21T12:53:51+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2023-03-21</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2022-11-11T17:42:32+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2022-11-11</span>
      
    
  </small>
</div>


  




                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../week3/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Week 3: Advanced Navigation &amp; SLAM">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Week 3: Advanced Navigation & SLAM
              </div>
            </div>
          </a>
        
        
          
          <a href="../week5/" class="md-footer__link md-footer__link--next" aria-label="Next: Week 5: ROS Actions">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Week 5: ROS Actions
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 The University of Sheffield <br /> Content by <a href="https://www.sheffield.ac.uk/engineering/diamond-engineering/our-staff/tom-howard">Dr Tom Howard</a> (License: <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC</a>)<br /> <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to monitor the usage of these resources, and to understand how effective they are in supporting your learning. Cookies also help us to evaluate how much impact our teaching materials are making in the community. With your support, you are helping us to make our teaching resources better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.top", "navigation.footer", "navigation.indexes", "toc.follow", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view"], "search": "../../../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.6eac0284.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
    
  </body>
</html>